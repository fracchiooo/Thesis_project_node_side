e=0a168h ( 41320) load[0m
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x1 (POWERON),boot:0x8 (SPI_FAST_FLASH_BOOT)
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (27) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (27) boot: Multicore bootloader[0m
[0;32mI (30) boot: chip revision: v0.2[0m
[0;32mI (34) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (38) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (43) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (48) boot: Enabling RNG early entropy source...[0m
[0;32mI (53) boot: Partition Table:[0m
[0;32mI (57) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (64) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (72) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (79) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (87) boot: End of partition table[0m
[0;32mI (91) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (116) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (119) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (128) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (161) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (177) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (177) boot: Disabling RNG early entropy source...[0m
[0;32mI (189) cpu_start: Multicore app[0m
[0;32mI (198) cpu_start: Pro cpu start user code[0m
[0;32mI (198) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (199) cpu_start: Application information:[0m
[0;32mI (201) cpu_start: Project name:     esp_node[0m
[0;32mI (206) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (212) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (218) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (223) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (228) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (233) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (238) cpu_start: Chip rev:         v0.2[0m
[0;32mI (243) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (250) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (256) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (262) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (268) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (275) spi_flash: detected chip: gd[0m
[0;32mI (279) spi_flash: flash io: dio[0m
[0;33mW (283) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (296) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (303) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (310) main_task: Started on CPU0[0m
[0;32mI (320) main_task: Calling app_main()[0m
[0;32mI (320) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (330) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (340) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (340) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (350) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (360) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (370) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (370) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (380) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (390) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (400) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (410) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (420) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (430) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (440) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (450) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (460) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (470) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (480) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (500) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20019.45 Hz (bin 246)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 1.70

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 32.33

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 1.90 (5.6 dB)
SNR 40kHz band: 87.52 (38.8 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1080) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1080) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1090) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1110) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1120) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20263.59 Hz (bin 249)
  Peak magnitude: 0.01
  Band average: 0.01
  Peak/Average ratio: 1.49

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.79
  Band average: 0.02
  Peak/Average ratio: 33.73

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.01

=== DECISION LOGIC ===
SNR 20kHz band: 2.33 (7.3 dB)
SNR 40kHz band: 144.09 (43.2 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1700) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1710) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1720) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1730) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1740) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1750) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 0.36
  Band average: 0.08
  Peak/Average ratio: 4.71

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.76
  Band average: 0.08
  Peak/Average ratio: 9.22

Noise baseline (5-15 kHz):
  Average: 0.06
  Max: 0.26

=== DECISION LOGIC ===
SNR 20kHz band: 6.26 (15.9 dB)
SNR 40kHz band: 13.34 (22.5 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: YES

==> WARNING: Both frequencies detected!
    Selecting 40 kHz (stronger signal)
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2330) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2340) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2350) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22786.37 Hz (bin 280)
  Peak magnitude: 0.00
  Band average: 0.00
  Peak/Average ratio: 1.30

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 48.98

Noise baseline (5-15 kHz):
  Average: 0.00
  Max: 0.00

=== DECISION LOGIC ===
SNR 20kHz band: 1.31 (2.3 dB)
SNR 40kHz band: 314.33 (49.9 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21565.67 Hz (bin 265)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 2.38

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 35.92

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.13 (6.6 dB)
SNR 40kHz band: 84.48 (38.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 3.07
  Band average: 1.35
  Peak/Average ratio: 2.27

Band 40kHz (37-42 kHz):
  Peak: 40934.08 Hz (bin 503)
  Peak magnitude: 4.15
  Band average: 1.27
  Peak/Average ratio: 3.27

Noise baseline (5-15 kHz):
  Average: 1.44
  Max: 3.63

=== DECISION LOGIC ===
SNR 20kHz band: 2.13 (6.6 dB)
SNR 40kHz band: 2.88 (9.2 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2344) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2354) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22460.85 Hz (bin 276)
  Peak magnitude: 0.39
  Band average: 0.17
  Peak/Average ratio: 2.33

Band 40kHz (37-42 kHz):
  Peak: 39062.34 Hz (bin 480)
  Peak magnitude: 0.39
  Band average: 0.16
  Peak/Average ratio: 2.44

Noise baseline (5-15 kHz):
  Average: 0.19
  Max: 0.84

=== DECISION LOGIC ===
SNR 20kHz band: 2.07 (6.3 dB)
SNR 40kHz band: 2.04 (6.2 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21321.53 Hz (bin 262)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 2.24

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.79
  Band average: 0.03
  Peak/Average ratio: 28.60

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.03

=== DECISION LOGIC ===
SNR 20kHz band: 1.83 (5.2 dB)
SNR 40kHz band: 64.08 (36.1 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21402.91 Hz (bin 263)
  Peak magnitude: 2.46
  Band average: 1.06
  Peak/Average ratio: 2.31

Band 40kHz (37-42 kHz):
  Peak: 38899.59 Hz (bin 478)
  Peak magnitude: 3.35
  Band average: 1.23
  Peak/Average ratio: 2.71

Noise baseline (5-15 kHz):
  Average: 1.01
  Max: 2.61

=== DECISION LOGIC ===
SNR 20kHz band: 2.44 (7.7 dB)
SNR 40kHz band: 3.32 (10.4 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 38899.59 Hz
==============================

Result: 38899 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20996.01 Hz (bin 258)
  Peak magnitude: 0.01
  Band average: 0.00
  Peak/Average ratio: 2.58

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.77
  Band average: 0.02
  Peak/Average ratio: 42.05

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.01

=== DECISION LOGIC ===
SNR 20kHz band: 2.14 (6.6 dB)
SNR 40kHz band: 131.63 (42.4 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19856.69 Hz (bin 244)
  Peak magnitude: 0.01
  Band average: 0.01
  Peak/Average ratio: 2.24

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.77
  Band average: 0.02
  Peak/Average ratio: 41.69

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.01

=== DECISION LOGIC ===
SNR 20kHz band: 1.97 (5.9 dB)
SNR 40kHz band: 124.33 (41.9 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 9.84
  Band average: 2.18
  Peak/Average ratio: 4.52

Band 40kHz (37-42 kHz):
  Peak: 39876.14 Hz (bin 490)
  Peak magnitude: 8.79
  Band average: 2.16
  Peak/Average ratio: 4.07

Noise baseline (5-15 kHz):
  Average: 1.40
  Max: 4.27

=== DECISION LOGIC ===
SNR 20kHz band: 7.01 (16.9 dB)
SNR 40kHz band: 6.26 (15.9 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: YES

==> WARNING: Both frequencies detected!
    Selecting 20 kHz (stronger signal)
==============================

Result: 21728 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2344) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2354) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19938.07 Hz (bin 245)
  Peak magnitude: 0.32
  Band average: 0.13
  Peak/Average ratio: 2.40

Band 40kHz (37-42 kHz):
  Peak: 39306.48 Hz (bin 483)
  Peak magnitude: 0.28
  Band average: 0.13
  Peak/Average ratio: 2.15

Noise baseline (5-15 kHz):
  Average: 0.20
  Max: 0.77

=== DECISION LOGIC ===
SNR 20kHz band: 1.61 (4.1 dB)
SNR 40kHz band: 1.38 (2.8 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22135.33 Hz (bin 272)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 1.83

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.03
  Peak/Average ratio: 29.80

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 1.51 (3.6 dB)
SNR 40kHz band: 56.83 (35.1 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 6.17
  Band average: 2.57
  Peak/Average ratio: 2.40

Band 40kHz (37-42 kHz):
  Peak: 37434.75 Hz (bin 460)
  Peak magnitude: 5.13
  Band average: 1.88
  Peak/Average ratio: 2.73

Noise baseline (5-15 kHz):
  Average: 1.89
  Max: 6.04

=== DECISION LOGIC ===
SNR 20kHz band: 3.27 (10.3 dB)
SNR 40kHz band: 2.72 (8.7 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: NO

==> DETECTED: 20 kHz TRANSDUCER ACTIVE
    Frequency: 21728.43 Hz
==============================

Result: 21728 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22542.23 Hz (bin 277)
  Peak magnitude: 0.01
  Band average: 0.01
  Peak/Average ratio: 2.29

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 41.94

Noise baseline (5-15 kHz):
  Average: 0.00
  Max: 0.01

=== DECISION LOGIC ===
SNR 20kHz band: 2.51 (8.0 dB)
SNR 40kHz band: 164.38 (44.3 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20589.11 Hz (bin 253)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 2.25

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 35.11

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.07 (6.3 dB)
SNR 40kHz band: 83.99 (38.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22379.47 Hz (bin 275)
  Peak magnitude: 4.97
  Band average: 2.28
  Peak/Average ratio: 2.18

Band 40kHz (37-42 kHz):
  Peak: 39957.52 Hz (bin 491)
  Peak magnitude: 5.30
  Band average: 2.16
  Peak/Average ratio: 2.45

Noise baseline (5-15 kHz):
  Average: 2.12
  Max: 4.85

=== DECISION LOGIC ===
SNR 20kHz band: 2.35 (7.4 dB)
SNR 40kHz band: 2.50 (8.0 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2344) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2354) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20344.97 Hz (bin 250)
  Peak magnitude: 0.39
  Band average: 0.14
  Peak/Average ratio: 2.70

Band 40kHz (37-42 kHz):
  Peak: 38411.30 Hz (bin 472)
  Peak magnitude: 0.38
  Band average: 0.16
  Peak/Average ratio: 2.37

Noise baseline (5-15 kHz):
  Average: 0.18
  Max: 0.64

=== DECISION LOGIC ===
SNR 20kHz band: 2.18 (6.8 dB)
SNR 40kHz band: 2.14 (6.6 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21321.53 Hz (bin 262)
  Peak magnitude: 0.01
  Band average: 0.01
  Peak/Average ratio: 2.11

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 38.40

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.13 (6.5 dB)
SNR 40kHz band: 118.56 (41.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19042.89 Hz (bin 234)
  Peak magnitude: 2.67
  Band average: 1.47
  Peak/Average ratio: 1.82

Band 40kHz (37-42 kHz):
  Peak: 38167.16 Hz (bin 469)
  Peak magnitude: 3.14
  Band average: 1.58
  Peak/Average ratio: 1.99

Noise baseline (5-15 kHz):
  Average: 1.38
  Max: 3.31

=== DECISION LOGIC ===
SNR 20kHz band: 1.94 (5.7 dB)
SNR 40kHz band: 2.28 (7.1 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21565.67 Hz (bin 265)
  Peak magnitude: 0.36
  Band average: 0.14
  Peak/Average ratio: 2.56

Band 40kHz (37-42 kHz):
  Peak: 40364.42 Hz (bin 496)
  Peak magnitude: 0.38
  Band average: 0.15
  Peak/Average ratio: 2.57

Noise baseline (5-15 kHz):
  Average: 0.19
  Max: 0.58

=== DECISION LOGIC ===
SNR 20kHz band: 1.97 (5.9 dB)
SNR 40kHz band: 2.05 (6.2 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19205.65 Hz (bin 236)
  Peak magnitude: 0.57
  Band average: 0.18
  Peak/Average ratio: 3.21

Band 40kHz (37-42 kHz):
  Peak: 40201.66 Hz (bin 494)
  Peak magnitude: 0.32
  Band average: 0.16
  Peak/Average ratio: 2.03

Noise baseline (5-15 kHz):
  Average: 0.18
  Max: 0.50

=== DECISION LOGIC ===
SNR 20kHz band: 3.23 (10.2 dB)
SNR 40kHz band: 1.83 (5.2 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: NO

==> DETECTED: 20 kHz TRANSDUCER ACTIVE
    Frequency: 19205.65 Hz
==============================

Result: 19205 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 3.24
  Band average: 1.29
  Peak/Average ratio: 2.51

Band 40kHz (37-42 kHz):
  Peak: 39957.52 Hz (bin 491)
  Peak magnitude: 4.67
  Band average: 1.45
  Peak/Average ratio: 3.21

Noise baseline (5-15 kHz):
  Average: 1.25
  Max: 3.87

=== DECISION LOGIC ===
SNR 20kHz band: 2.60 (8.3 dB)
SNR 40kHz band: 3.74 (11.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 39957.52 Hz
==============================

Result: 39957 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19531.17 Hz (bin 240)
  Peak magnitude: 0.50
  Band average: 0.17
  Peak/Average ratio: 2.91

Band 40kHz (37-42 kHz):
  Peak: 40445.80 Hz (bin 497)
  Peak magnitude: 0.40
  Band average: 0.15
  Peak/Average ratio: 2.59

Noise baseline (5-15 kHz):
  Average: 0.19
  Max: 0.63

=== DECISION LOGIC ===
SNR 20kHz band: 2.70 (8.6 dB)
SNR 40kHz band: 2.13 (6.6 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20263.59 Hz (bin 249)
  Peak magnitude: 0.43
  Band average: 0.16
  Peak/Average ratio: 2.75

Band 40kHz (37-42 kHz):
  Peak: 39062.34 Hz (bin 480)
  Peak magnitude: 0.26
  Band average: 0.13
  Peak/Average ratio: 2.06

Noise baseline (5-15 kHz):
  Average: 0.18
  Max: 0.58

=== DECISION LOGIC ===
SNR 20kHz band: 2.38 (7.5 dB)
SNR 40kHz band: 1.46 (3.3 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 4.14
  Band average: 1.51
  Peak/Average ratio: 2.75

Band 40kHz (37-42 kHz):
  Peak: 39957.52 Hz (bin 491)
  Peak magnitude: 3.93
  Band average: 1.47
  Peak/Average ratio: 2.67

Noise baseline (5-15 kHz):
  Average: 1.28
  Max: 3.10

=== DECISION LOGIC ===
SNR 20kHz band: 3.23 (10.2 dB)
SNR 40kHz band: 3.06 (9.7 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: YES

==> WARNING: Both frequencies detected!
    Selecting 20 kHz (stronger signal)
==============================

Result: 21728 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21321.53 Hz (bin 262)
  Peak magnitude: 0.40
  Band average: 0.16
  Peak/Average ratio: 2.52

Band 40kHz (37-42 kHz):
  Peak: 41015.46 Hz (bin 504)
  Peak magnitude: 0.36
  Band average: 0.14
  Peak/Average ratio: 2.54

Noise baseline (5-15 kHz):
  Average: 0.19
  Max: 0.70

=== DECISION LOGIC ===
SNR 20kHz band: 2.07 (6.3 dB)
SNR 40kHz band: 1.85 (5.3 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19856.69 Hz (bin 244)
  Peak magnitude: 0.45
  Band average: 0.19
  Peak/Average ratio: 2.40

Band 40kHz (37-42 kHz):
  Peak: 37841.64 Hz (bin 465)
  Peak magnitude: 0.44
  Band average: 0.17
  Peak/Average ratio: 2.57

Noise baseline (5-15 kHz):
  Average: 0.21
  Max: 0.74

=== DECISION LOGIC ===
SNR 20kHz band: 2.12 (6.5 dB)
SNR 40kHz band: 2.08 (6.4 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 4.46
  Band average: 1.29
  Peak/Average ratio: 3.47

Band 40kHz (37-42 kHz):
  Peak: 39876.14 Hz (bin 490)
  Peak magnitude: 5.97
  Band average: 1.41
  Peak/Average ratio: 4.22

Noise baseline (5-15 kHz):
  Average: 1.26
  Max: 5.01

=== DECISION LOGIC ===
SNR 20kHz band: 3.53 (11.0 dB)
SNR 40kHz band: 4.72 (13.5 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: YES

==> WARNING: Both frequencies detected!
    Selecting 40 kHz (stronger signal)
==============================

Result: 39876 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 18961.51 Hz (bin 233)
  Peak magnitude: 0.34
  Band average: 0.16
  Peak/Average ratio: 2.13

Band 40kHz (37-42 kHz):
  Peak: 40120.28 Hz (bin 493)
  Peak magnitude: 0.48
  Band average: 0.17
  Peak/Average ratio: 2.80

Noise baseline (5-15 kHz):
  Average: 0.20
  Max: 0.70

=== DECISION LOGIC ===
SNR 20kHz band: 1.73 (4.8 dB)
SNR 40kHz band: 2.43 (7.7 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19042.89 Hz (bin 234)
  Peak magnitude: 0.40
  Band average: 0.20
  Peak/Average ratio: 2.00

Band 40kHz (37-42 kHz):
  Peak: 41015.46 Hz (bin 504)
  Peak magnitude: 0.42
  Band average: 0.15
  Peak/Average ratio: 2.73

Noise baseline (5-15 kHz):
  Average: 0.19
  Max: 0.55

=== DECISION LOGIC ===
SNR 20kHz band: 2.06 (6.3 dB)
SNR 40kHz band: 2.16 (6.7 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22379.47 Hz (bin 275)
  Peak magnitude: 4.44
  Band average: 1.78
  Peak/Average ratio: 2.50

Band 40kHz (37-42 kHz):
  Peak: 37516.12 Hz (bin 461)
  Peak magnitude: 3.36
  Band average: 1.39
  Peak/Average ratio: 2.42

Noise baseline (5-15 kHz):
  Average: 1.51
  Max: 5.78

=== DECISION LOGIC ===
SNR 20kHz band: 2.94 (9.4 dB)
SNR 40kHz band: 2.22 (6.9 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22135.33 Hz (bin 272)
  Peak magnitude: 0.00
  Band average: 0.00
  Peak/Average ratio: 2.61

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.01
  Peak/Average ratio: 52.87

Noise baseline (5-15 kHz):
  Average: 0.00
  Max: 0.00

=== DECISION LOGIC ===
SNR 20kHz band: 2.31 (7.3 dB)
SNR 40kHz band: 537.02 (54.6 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19449.79 Hz (bin 239)
  Peak magnitude: 0.09
  Band average: 0.08
  Peak/Average ratio: 1.16

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.85
  Band average: 0.09
  Peak/Average ratio: 9.24

Noise baseline (5-15 kHz):
  Average: 0.06
  Max: 0.10

=== DECISION LOGIC ===
SNR 20kHz band: 1.44 (3.2 dB)
SNR 40kHz band: 13.28 (22.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 3.47
  Band average: 1.34
  Peak/Average ratio: 2.59

Band 40kHz (37-42 kHz):
  Peak: 39957.52 Hz (bin 491)
  Peak magnitude: 4.58
  Band average: 1.62
  Peak/Average ratio: 2.83

Noise baseline (5-15 kHz):
  Average: 1.03
  Max: 2.66

=== DECISION LOGIC ===
SNR 20kHz band: 3.36 (10.5 dB)
SNR 40kHz band: 4.43 (12.9 dB)

Signal detected at 20kHz: YES
Signal detected at 40kHz: YES

==> WARNING: Both frequencies detected!
    Selecting 40 kHz (stronger signal)
==============================

Result: 39957 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2344) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2354) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19368.41 Hz (bin 238)
  Peak magnitude: 0.33
  Band average: 0.14
  Peak/Average ratio: 2.32

Band 40kHz (37-42 kHz):
  Peak: 37109.23 Hz (bin 456)
  Peak magnitude: 0.46
  Band average: 0.15
  Peak/Average ratio: 3.11

Noise baseline (5-15 kHz):
  Average: 0.21
  Max: 0.67

=== DECISION LOGIC ===
SNR 20kHz band: 1.57 (3.9 dB)
SNR 40kHz band: 2.22 (6.9 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19042.89 Hz (bin 234)
  Peak magnitude: 0.05
  Band average: 0.04
  Peak/Average ratio: 1.29

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.80
  Band average: 0.05
  Peak/Average ratio: 14.51

Noise baseline (5-15 kHz):
  Average: 0.04
  Max: 0.05

=== DECISION LOGIC ===
SNR 20kHz band: 1.31 (2.3 dB)
SNR 40kHz band: 19.39 (25.8 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20996.01 Hz (bin 258)
  Peak magnitude: 3.29
  Band average: 1.61
  Peak/Average ratio: 2.04

Band 40kHz (37-42 kHz):
  Peak: 39876.14 Hz (bin 490)
  Peak magnitude: 5.61
  Band average: 1.71
  Peak/Average ratio: 3.27

Noise baseline (5-15 kHz):
  Average: 1.43
  Max: 4.92

=== DECISION LOGIC ===
SNR 20kHz band: 2.30 (7.2 dB)
SNR 40kHz band: 3.93 (11.9 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 39876.14 Hz
==============================

Result: 39876 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19124.27 Hz (bin 235)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 2.02

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.77
  Band average: 0.02
  Peak/Average ratio: 35.30

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.09 (6.4 dB)
SNR 40kHz band: 85.18 (38.6 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22053.95 Hz (bin 271)
  Peak magnitude: 0.01
  Band average: 0.01
  Peak/Average ratio: 1.45

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 34.87

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.01

=== DECISION LOGIC ===
SNR 20kHz band: 1.54 (3.7 dB)
SNR 40kHz band: 84.37 (38.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20996.01 Hz (bin 258)
  Peak magnitude: 3.35
  Band average: 1.42
  Peak/Average ratio: 2.36

Band 40kHz (37-42 kHz):
  Peak: 40934.08 Hz (bin 503)
  Peak magnitude: 4.14
  Band average: 1.60
  Peak/Average ratio: 2.58

Noise baseline (5-15 kHz):
  Average: 1.55
  Max: 3.87

=== DECISION LOGIC ===
SNR 20kHz band: 2.17 (6.7 dB)
SNR 40kHz band: 2.68 (8.5 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2344) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2354) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ï¿½ï¿½ï¿½ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22786.37 Hz (bin 280)
  Peak magnitude: 0.01
  Band average: 0.00
  Peak/Average ratio: 1.84

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 43.66

Noise baseline (5-15 kHz):
  Average: 0.00
  Max: 0.01

=== DECISION LOGIC ===
SNR 20kHz band: 1.67 (4.5 dB)
SNR 40kHz band: 170.96 (44.7 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22542.23 Hz (bin 277)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 2.32

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 31.78

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.57 (8.2 dB)
SNR 40kHz band: 82.31 (38.3 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 21728.43 Hz (bin 267)
  Peak magnitude: 2.49
  Band average: 1.11
  Peak/Average ratio: 2.25

Band 40kHz (37-42 kHz):
  Peak: 39876.14 Hz (bin 490)
  Peak magnitude: 4.77
  Band average: 1.38
  Peak/Average ratio: 3.46

Noise baseline (5-15 kHz):
  Average: 1.15
  Max: 3.75

=== DECISION LOGIC ===
SNR 20kHz band: 2.16 (6.7 dB)
SNR 40kHz band: 4.13 (12.3 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 39876.14 Hz
==============================

Result: 39876 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2344) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2354) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 19042.89 Hz (bin 234)
  Peak magnitude: 0.39
  Band average: 0.16
  Peak/Average ratio: 2.48

Band 40kHz (37-42 kHz):
  Peak: 37190.61 Hz (bin 457)
  Peak magnitude: 0.48
  Band average: 0.18
  Peak/Average ratio: 2.61

Noise baseline (5-15 kHz):
  Average: 0.19
  Max: 0.55

=== DECISION LOGIC ===
SNR 20kHz band: 2.05 (6.2 dB)
SNR 40kHz band: 2.55 (8.1 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: NO

==> NO VIBRATION DETECTED (0 Hz)
==============================

Result: 0 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1074) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1104) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20670.49 Hz (bin 254)
  Peak magnitude: 0.01
  Band average: 0.01
  Peak/Average ratio: 2.32

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 41.63

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.13 (6.6 dB)
SNR 40kHz band: 114.34 (41.2 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1694) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1704) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1714) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1724) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 20751.87 Hz (bin 255)
  Peak magnitude: 4.69
  Band average: 2.06
  Peak/Average ratio: 2.28

Band 40kHz (37-42 kHz):
  Peak: 39876.14 Hz (bin 490)
  Peak magnitude: 7.33
  Band average: 2.19
  Peak/Average ratio: 3.34

Noise baseline (5-15 kHz):
  Average: 1.84
  Max: 5.40

=== DECISION LOGIC ===
SNR 20kHz band: 2.54 (8.1 dB)
SNR 40kHz band: 3.97 (12.0 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 39876.14 Hz
==============================

Result: 39876 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (2324) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (2334) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=====================================
[0;31mE (2344) adc_continuous: adc_continuous_stop(403): The driver is already stopped[0m
ESP_ERROR_CHECK failed: esp_err_t 0x103 (ESP_ERR_INVALID_STATE) at 0x42009714
file: "./components/frequency/fft_wrapper.cpp" line 12
func: FFT_ultrasonic::~FFT_ultrasonic()
expression: adc_continuous_stop(_handle)

abort() was called at PC 0x4037b41b on core 0


Backtrace: 0x40375a56:0x3fc9e310 0x4037b425:0x3fc9e330 0x403822bd:0x3fc9e350 0x4037b41b:0x3fc9e3c0 0x42009714:0x3fc9e3f0 0x42008fb2:0x3fc9e410 0x42029167:0x3fc9e450 0x4037bd8d:0x3fc9e480




ELF file SHA256: eb63220b3

Rebooting...
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0xc (RTC_SW_CPU_RST),boot:0x8 (SPI_FAST_FLASH_BOOT)
Saved PC:0x403759cc
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce3810,len:0x178c
load:0x403c9700,len:0x4
load:0x403c9704,len:0xcbc
load:0x403cc700,len:0x2d9c
entry 0x403c9914
[0;32mI (31) boot: ESP-IDF v5.2.2 2nd stage bootloader[0m
[0;32mI (31) boot: compile time Oct 17 2025 19:46:11[0m
[0;32mI (31) boot: Multicore bootloader[0m
[0;32mI (34) boot: chip revision: v0.2[0m
[0;32mI (38) boot.esp32s3: Boot SPI Speed : 80MHz[0m
[0;32mI (43) boot.esp32s3: SPI Mode       : DIO[0m
[0;32mI (48) boot.esp32s3: SPI Flash Size : 2MB[0m
[0;32mI (52) boot: Enabling RNG early entropy source...[0m
[0;32mI (58) boot: Partition Table:[0m
[0;32mI (61) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (69) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (76) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (84) boot:  2 factory          factory app      00 00 00010000 00177000[0m
[0;32mI (91) boot: End of partition table[0m
[0;32mI (95) esp_image: segment 0: paddr=00010020 vaddr=3c030020 size=1722ch ( 94764) map[0m
[0;32mI (121) esp_image: segment 1: paddr=00027254 vaddr=3fc94500 size=02ad4h ( 10964) load[0m
[0;32mI (123) esp_image: segment 2: paddr=00029d30 vaddr=40374000 size=062e8h ( 25320) load[0m
[0;32mI (132) esp_image: segment 3: paddr=00030020 vaddr=42000020 size=2a018h (172056) map[0m
[0;32mI (166) esp_image: segment 4: paddr=0005a040 vaddr=4037a2e8 size=0a168h ( 41320) load[0m
[0;32mI (182) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (182) boot: Disabling RNG early entropy source...[0m
[0;32mI (193) cpu_start: Multicore app[0m
[0;32mI (203) cpu_start: Pro cpu start user code[0m
[0;32mI (203) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (203) cpu_start: Application information:[0m
[0;32mI (206) cpu_start: Project name:     esp_node[0m
[0;32mI (211) cpu_start: App version:      5129bb6-dirty[0m
[0;32mI (216) cpu_start: Compile time:     Oct 17 2025 19:46:08[0m
[0;32mI (222) cpu_start: ELF file SHA256:  eb63220b3...[0m
[0;32mI (228) cpu_start: ESP-IDF:          v5.2.2[0m
[0;32mI (233) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (237) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (242) cpu_start: Chip rev:         v0.2[0m
[0;32mI (247) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (254) heap_init: At 3FC979E0 len 00051D30 (327 KiB): RAM[0m
[0;32mI (260) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM[0m
[0;32mI (266) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM[0m
[0;32mI (273) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM[0m
[0;32mI (280) spi_flash: detected chip: gd[0m
[0;32mI (283) spi_flash: flash io: dio[0m
[0;33mW (287) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (301) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (307) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (314) main_task: Started on CPU0[0m
[0;32mI (324) main_task: Calling app_main()[0m
[0;32mI (324) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (334) PWM: PWM inizializzato: GPIO 2, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (344) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (344) PWM: PWM inizializzato: GPIO 3, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (354) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (364) PWM: PWM inizializzato: GPIO 4, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (374) PWM: Risoluzione ottimale calcolata: 8 bit per frequenza 40000 Hz[0m
[0;32mI (374) PWM: PWM inizializzato: GPIO 1, Freq 40000 Hz, Risoluzione 8 bit (256 livelli)[0m
[0;32mI (384) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (394) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (404) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
[0;32mI (414) PWM: Cambio frequenza: 40000 -> 1000 Hz, risoluzione: 8 -> 14 bit[0m
[0;32mI (424) PWM: Timer riconfigurato: 1000 Hz, 14 bit (16384 livelli)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (434) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

========== DIAGNOSTIC TEST ==========
[0;32mI (444) FFT: sampling rate too high, the maximum sampling rate will be used: 83333[0m
[0;32mI (454) gpio: GPIO[7]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m

--- Test 1: All OFF ---
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (464) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 256 (risoluzione: 8 bit)
[0;32mI (474) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/256)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (484) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (504) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22216.71 Hz (bin 273)
  Peak magnitude: 0.00
  Band average: 0.00
  Peak/Average ratio: 1.49

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.78
  Band average: 0.02
  Peak/Average ratio: 50.52

Noise baseline (5-15 kHz):
  Average: 0.00
  Max: 0.00

=== DECISION LOGIC ===
SNR 20kHz band: 1.66 (4.4 dB)
SNR 40kHz band: 520.59 (54.3 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz

--- Test 2: 20kHz input ONLY (no burst) ---
[0;32mI (1084) PWM: Cambio frequenza: 40000 -> 21700 Hz, risoluzione: 8 -> 9 bit[0m
[0;32mI (1084) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1094) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1114) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 0 / 16384 (risoluzione: 14 bit)
[0;32mI (1124) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/16384)[0m

=== FREQUENCY BAND ANALYSIS ===
Band 20kHz (19-23 kHz):
  Peak: 22460.85 Hz (bin 276)
  Peak magnitude: 0.02
  Band average: 0.01
  Peak/Average ratio: 2.17

Band 40kHz (37-42 kHz):
  Peak: 41585.12 Hz (bin 511)
  Peak magnitude: 0.77
  Band average: 0.02
  Peak/Average ratio: 31.44

Noise baseline (5-15 kHz):
  Average: 0.01
  Max: 0.02

=== DECISION LOGIC ===
SNR 20kHz band: 2.31 (7.3 dB)
SNR 40kHz band: 78.59 (37.9 dB)

Signal detected at 20kHz: NO
Signal detected at 40kHz: YES

==> DETECTED: 40 kHz TRANSDUCER ACTIVE
    Frequency: 41585.12 Hz
==============================

Result: 41585 Hz
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1704) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m

--- Test 3: 20kHz input + burst ---
[0;32mI (1714) PWM: Cambio frequenza: 21700 -> 21700 Hz, risoluzione: 9 -> 9 bit[0m
[0;32mI (1724) PWM: Timer riconfigurato: 21700 Hz, 9 bit (512 livelli)[0m
Imposto duty: 0 / 512 (risoluzione: 9 bit)
[0;32mI (1734) PWM: Hardware PWM duty: 0.00% richiesto -> 0.00% effettivo (0/512)[0m
Imposto duty: 256 / 512 (risoluzione: 9 bit)
[0;32mI (1744) PWM: Hardware PWM duty: 50.00% richiesto -> 50.10% effettivo (256/512)[0m
Imposto duty: 8192 / 16384 (risoluzione: 14 bit)
[0;32mI (1754) PWM: Hardware PWM duty: 50.00% richiesto -> 50.00% effettivo (8192/16384)[0m
